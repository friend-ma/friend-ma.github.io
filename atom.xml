<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>兴趣使然的程序猿.hub</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="www.friend-ma.top/"/>
  <updated>2019-05-17T06:01:38.307Z</updated>
  <id>www.friend-ma.top/</id>
  
  <author>
    <name>friend-ma</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>反射</title>
    <link href="www.friend-ma.top/2019/05/17/%E5%8F%8D%E5%B0%84/"/>
    <id>www.friend-ma.top/2019/05/17/反射/</id>
    <published>2019-05-17T03:23:54.817Z</published>
    <updated>2019-05-17T06:01:38.307Z</updated>
    
    <content type="html"><![CDATA[<h2 id="反射：框架设计的灵魂"><a href="#反射：框架设计的灵魂" class="headerlink" title="反射：框架设计的灵魂"></a>反射：框架设计的灵魂</h2><pre><code>* 框架：半成品软件。可以在框架的基础上进行软件开发，简化编码* 反射：将类的各个组成部分封装为其他对象，这就是反射机制    * 好处：        1. 可以在程序运行过程中，操作这些对象。        2. 可以解耦，提高程序的可扩展性。* 获取Class对象的方式：    1. Class.forName(&quot;全类名&quot;)：将字节码文件加载进内存，返回Class对象        * 多用于配置文件，将类名定义在配置文件中。读取文件，加载类    2. 类名.class：通过类名的属性class获取        * 多用于参数的传递    3. 对象.getClass()：getClass()方法在Object类中定义着。        * 多用于对象的获取字节码的方式    * 结论：        同一个字节码文件(*.class)在一次程序运行过程中，只会被加载一次，不论通过哪一种方式获取的Class对象都是同一个。    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectDemo1 &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">        获取Class对象的方式：</span><br><span class="line">            1. Class.forName(&quot;全类名&quot;)：将字节码文件加载进内存，返回Class对象</span><br><span class="line">            2. 类名.class：通过类名的属性class获取</span><br><span class="line">            3. 对象.getClass()：getClass()方法在Object类中定义着。</span><br><span class="line"></span><br><span class="line">     */</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        //1.Class.forName(&quot;全类名&quot;)</span><br><span class="line">        Class cls1 = Class.forName(&quot;cn.itcast.domain.Person&quot;);</span><br><span class="line">        System.out.println(cls1);</span><br><span class="line">        //2.类名.class</span><br><span class="line">        Class cls2 = Person.class;</span><br><span class="line">        System.out.println(cls2);</span><br><span class="line">        //3.对象.getClass()</span><br><span class="line">        Person p = new Person();</span><br><span class="line">        Class cls3 = p.getClass();</span><br><span class="line">        System.out.println(cls3);</span><br><span class="line"></span><br><span class="line">        //== 比较三个对象</span><br><span class="line">        System.out.println(cls1 == cls2);//true</span><br><span class="line">        System.out.println(cls1 == cls3);//true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Class c = Student.class;</span><br><span class="line">        System.out.println(c == cls1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>* Class对象功能：    * 获取功能：        1. 获取成员变量们            * Field[] getFields() ：获取所有public修饰的成员变量            * Field getField(String name)   获取指定名称的 public修饰的成员变量            * Field[] getDeclaredFields()  获取所有的成员变量，不考虑修饰符            * Field getDeclaredField(String name)          2. 获取构造方法们            * Constructor&lt;?&gt;[] getConstructors()              * Constructor&lt;T&gt; getConstructor(类&lt;?&gt;... parameterTypes)              * Constructor&lt;T&gt; getDeclaredConstructor(类&lt;?&gt;... parameterTypes)              * Constructor&lt;?&gt;[] getDeclaredConstructors()          3. 获取成员方法们：            * Method[] getMethods()              * Method getMethod(String name, 类&lt;?&gt;... parameterTypes)              * Method[] getDeclaredMethods()              * Method getDeclaredMethod(String name, 类&lt;?&gt;... parameterTypes)          4. 获取全类名                * String getName()  * Field：成员变量    * 操作：        1. 设置值            * void set(Object obj, Object value)          2. 获取值            * get(Object obj)         3. 忽略访问权限修饰符的安全检查            * setAccessible(true):暴力反射</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectDemo2 &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     Class对象功能：</span><br><span class="line">         * 获取功能：</span><br><span class="line">         1. 获取成员变量们</span><br><span class="line">             * Field[] getFields()</span><br><span class="line">             * Field getField(String name)</span><br><span class="line"></span><br><span class="line">             * Field[] getDeclaredFields()</span><br><span class="line">             * Field getDeclaredField(String name)</span><br><span class="line">         2. 获取构造方法们</span><br><span class="line">             * Constructor&lt;?&gt;[] getConstructors()</span><br><span class="line">             * Constructor&lt;T&gt; getConstructor(类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">             * Constructor&lt;T&gt; getDeclaredConstructor(类&lt;?&gt;... parameterTypes)</span><br><span class="line">             * Constructor&lt;?&gt;[] getDeclaredConstructors()</span><br><span class="line">         3. 获取成员方法们：</span><br><span class="line">             * Method[] getMethods()</span><br><span class="line">             * Method getMethod(String name, 类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">             * Method[] getDeclaredMethods()</span><br><span class="line">             * Method getDeclaredMethod(String name, 类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">         4. 获取类名</span><br><span class="line">             * String getName()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        //0.获取Person的Class对象</span><br><span class="line">        Class personClass = Person.class;</span><br><span class="line">        /*</span><br><span class="line">             1. 获取成员变量们</span><br><span class="line">                 * Field[] getFields()</span><br><span class="line">                 * Field getField(String name)</span><br><span class="line"></span><br><span class="line">                 * Field[] getDeclaredFields()</span><br><span class="line">                 * Field getDeclaredField(String name)</span><br><span class="line"></span><br><span class="line">         */</span><br><span class="line">        //1.Field[] getFields()获取所有public修饰的成员变量</span><br><span class="line">        Field[] fields = personClass.getFields();</span><br><span class="line">        for (Field field : fields) &#123;</span><br><span class="line">            System.out.println(field);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;------------&quot;);</span><br><span class="line">        //2.Field getField(String name)</span><br><span class="line">        Field a = personClass.getField(&quot;a&quot;);</span><br><span class="line">        //获取成员变量a 的值</span><br><span class="line">        Person p = new Person();</span><br><span class="line">        Object value = a.get(p);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        //设置a的值</span><br><span class="line">        a.set(p,&quot;张三&quot;);</span><br><span class="line">        System.out.println(p);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;===================&quot;);</span><br><span class="line"></span><br><span class="line">        //Field[] getDeclaredFields()：获取所有的成员变量，不考虑修饰符</span><br><span class="line">        Field[] declaredFields = personClass.getDeclaredFields();</span><br><span class="line">        for (Field declaredField : declaredFields) &#123;</span><br><span class="line">            System.out.println(declaredField);</span><br><span class="line">        &#125;</span><br><span class="line">        //Field getDeclaredField(String name)</span><br><span class="line">        Field d = personClass.getDeclaredField(&quot;d&quot;);</span><br><span class="line">        //忽略访问权限修饰符的安全检查</span><br><span class="line">        d.setAccessible(true);//暴力反射</span><br><span class="line">        Object value2 = d.get(p);</span><br><span class="line">        System.out.println(value2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>* Constructor:构造方法    * 创建对象：        * T newInstance(Object... initargs)          * 如果使用空参数构造方法创建对象，操作可以简化：Class对象的newInstance方法</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectDemo3 &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     Class对象功能：</span><br><span class="line">         * 获取功能：</span><br><span class="line">         1. 获取成员变量们</span><br><span class="line">             * Field[] getFields()</span><br><span class="line">             * Field getField(String name)</span><br><span class="line"></span><br><span class="line">             * Field[] getDeclaredFields()</span><br><span class="line">             * Field getDeclaredField(String name)</span><br><span class="line">         2. 获取构造方法们</span><br><span class="line">             * Constructor&lt;?&gt;[] getConstructors()</span><br><span class="line">             * Constructor&lt;T&gt; getConstructor(类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">             * Constructor&lt;T&gt; getDeclaredConstructor(类&lt;?&gt;... parameterTypes)</span><br><span class="line">             * Constructor&lt;?&gt;[] getDeclaredConstructors()</span><br><span class="line">         3. 获取成员方法们：</span><br><span class="line">             * Method[] getMethods()</span><br><span class="line">             * Method getMethod(String name, 类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">             * Method[] getDeclaredMethods()</span><br><span class="line">             * Method getDeclaredMethod(String name, 类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">         4. 获取类名</span><br><span class="line">             * String getName()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        //0.获取Person的Class对象</span><br><span class="line">        Class personClass = Person.class;</span><br><span class="line">        /*</span><br><span class="line">            2. 获取构造方法们</span><br><span class="line">                 * Constructor&lt;?&gt;[] getConstructors()</span><br><span class="line">                 * Constructor&lt;T&gt; getConstructor(类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">                 * Constructor&lt;T&gt; getDeclaredConstructor(类&lt;?&gt;... parameterTypes)</span><br><span class="line">                 * Constructor&lt;?&gt;[] getDeclaredConstructors()</span><br><span class="line">         */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //Constructor&lt;T&gt; getConstructor(类&lt;?&gt;... parameterTypes)</span><br><span class="line">        Constructor constructor = personClass.getConstructor(String.class, int.class);</span><br><span class="line">        System.out.println(constructor);</span><br><span class="line">        //创建对象</span><br><span class="line">        Object person = constructor.newInstance(&quot;张三&quot;, 23);</span><br><span class="line">        System.out.println(person);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;----------&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Constructor constructor1 = personClass.getConstructor();</span><br><span class="line">        System.out.println(constructor1);</span><br><span class="line">        //创建对象</span><br><span class="line">        Object person1 = constructor1.newInstance();</span><br><span class="line">        System.out.println(person1);</span><br><span class="line"></span><br><span class="line">        Object o = personClass.newInstance();</span><br><span class="line">        System.out.println(o);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //constructor1.setAccessible(true);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>* Method：方法对象    * 执行方法：        * Object invoke(Object obj, Object... args)      * 获取方法名称：        * String getName:获取方法名</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectDemo4 &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     Class对象功能：</span><br><span class="line">         * 获取功能：</span><br><span class="line">         1. 获取成员变量们</span><br><span class="line">             * Field[] getFields()</span><br><span class="line">             * Field getField(String name)</span><br><span class="line"></span><br><span class="line">             * Field[] getDeclaredFields()</span><br><span class="line">             * Field getDeclaredField(String name)</span><br><span class="line">         2. 获取构造方法们</span><br><span class="line">             * Constructor&lt;?&gt;[] getConstructors()</span><br><span class="line">             * Constructor&lt;T&gt; getConstructor(类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">             * Constructor&lt;T&gt; getDeclaredConstructor(类&lt;?&gt;... parameterTypes)</span><br><span class="line">             * Constructor&lt;?&gt;[] getDeclaredConstructors()</span><br><span class="line">         3. 获取成员方法们：</span><br><span class="line">             * Method[] getMethods()</span><br><span class="line">             * Method getMethod(String name, 类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">             * Method[] getDeclaredMethods()</span><br><span class="line">             * Method getDeclaredMethod(String name, 类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">         4. 获取类名</span><br><span class="line">             * String getName()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        //0.获取Person的Class对象</span><br><span class="line">        Class personClass = Person.class;</span><br><span class="line">        /*</span><br><span class="line">          3. 获取成员方法们：</span><br><span class="line">             * Method[] getMethods()</span><br><span class="line">             * Method getMethod(String name, 类&lt;?&gt;... parameterTypes)</span><br><span class="line"></span><br><span class="line">             * Method[] getDeclaredMethods()</span><br><span class="line">             * Method getDeclaredMethod(String name, 类&lt;?&gt;... parameterTypes)</span><br><span class="line">         */</span><br><span class="line">        //获取指定名称的方法</span><br><span class="line">        Method eat_method = personClass.getMethod(&quot;eat&quot;);</span><br><span class="line">        Person p = new Person();</span><br><span class="line">        //执行方法</span><br><span class="line">        eat_method.invoke(p);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Method eat_method2 = personClass.getMethod(&quot;eat&quot;, String.class);</span><br><span class="line">        //执行方法</span><br><span class="line">        eat_method2.invoke(p,&quot;饭&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;-----------------&quot;);</span><br><span class="line"></span><br><span class="line">        //获取所有public修饰的方法</span><br><span class="line">        Method[] methods = personClass.getMethods();</span><br><span class="line">        for (Method method : methods) &#123;</span><br><span class="line">            System.out.println(method);</span><br><span class="line">            String name = method.getName();</span><br><span class="line">            System.out.println(name);</span><br><span class="line">            //method.setAccessible(true);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //获取类名</span><br><span class="line">        String className = personClass.getName();</span><br><span class="line">        System.out.println(className);//cn.itcast.domain.Person</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>* 案例：    * 需求：写一个&quot;框架&quot;，不能改变该类的任何代码的前提下，可以帮我们创建任意类的对象，并且执行其中任意方法        * 实现：            1. 配置文件            2. 反射        * 步骤：            1. 将需要创建的对象的全类名和需要执行的方法定义在配置文件中            2. 在程序中加载读取配置文件            3. 使用反射技术来加载类文件进内存            4. 创建对象            5. 执行方法</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectTest &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        //可以创建任意类的对象，可以执行任意方法</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">            前提：不能改变该类的任何代码。可以创建任意类的对象，可以执行任意方法</span><br><span class="line">         */</span><br><span class="line">      /*  Person p = new Person();</span><br><span class="line">        p.eat();*/</span><br><span class="line">/*</span><br><span class="line">        Student stu = new Student();</span><br><span class="line">        stu.sleep();*/</span><br><span class="line"></span><br><span class="line">        //1.加载配置文件</span><br><span class="line">        //1.1创建Properties对象</span><br><span class="line">        Properties pro = new Properties();</span><br><span class="line">        //1.2加载配置文件，转换为一个集合</span><br><span class="line">        //1.2.1获取class目录下的配置文件</span><br><span class="line">        ClassLoader classLoader = ReflectTest.class.getClassLoader();</span><br><span class="line">        InputStream is = classLoader.getResourceAsStream(&quot;pro.properties&quot;);</span><br><span class="line">        pro.load(is);</span><br><span class="line"></span><br><span class="line">        //2.获取配置文件中定义的数据</span><br><span class="line">        String className = pro.getProperty(&quot;className&quot;);</span><br><span class="line">        String methodName = pro.getProperty(&quot;methodName&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //3.加载该类进内存</span><br><span class="line">        Class cls = Class.forName(className);</span><br><span class="line">        //4.创建对象</span><br><span class="line">        Object obj = cls.newInstance();</span><br><span class="line">        //5.获取方法对象</span><br><span class="line">        Method method = cls.getMethod(methodName);</span><br><span class="line">        //6.执行方法</span><br><span class="line">        method.invoke(obj);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;反射：框架设计的灵魂&quot;&gt;&lt;a href=&quot;#反射：框架设计的灵魂&quot; class=&quot;headerlink&quot; title=&quot;反射：框架设计的灵魂&quot;&gt;&lt;/a&gt;反射：框架设计的灵魂&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;* 框架：半成品软件。可以在框架的基础上进行软件开发，简化编
      
    
    </summary>
    
      <category term="Java" scheme="www.friend-ma.top/categories/Java/"/>
    
      <category term="反射" scheme="www.friend-ma.top/categories/Java/%E5%8F%8D%E5%B0%84/"/>
    
    
      <category term="反射" scheme="www.friend-ma.top/tags/%E5%8F%8D%E5%B0%84/"/>
    
  </entry>
  
  <entry>
    <title>Tomcat&amp;Servlet笔记</title>
    <link href="www.friend-ma.top/2019/04/13/Tomcat_Servlet%E7%AC%94%E8%AE%B0/"/>
    <id>www.friend-ma.top/2019/04/13/Tomcat_Servlet笔记/</id>
    <published>2019-04-13T10:57:50.000Z</published>
    <updated>2019-05-14T16:31:10.024Z</updated>
    
    <content type="html"><![CDATA[<h1 id="今日内容"><a href="#今日内容" class="headerlink" title="今日内容"></a>今日内容</h1><pre><code>1. web相关概念回顾2. web服务器软件：Tomcat3. Servlet入门学习</code></pre><h2 id="web相关概念回顾"><a href="#web相关概念回顾" class="headerlink" title="web相关概念回顾"></a>web相关概念回顾</h2><pre><code>1. 软件架构    1. C/S：客户端/服务器端    2. B/S：浏览器/服务器端2. 资源分类    1. 静态资源：所有用户访问后，得到的结果都是一样的，称为静态资源.静态资源可以直接被浏览器解析        * 如： html,css,JavaScript    2. 动态资源:每个用户访问相同资源后，得到的结果可能不一样。称为动态资源。动态资源被访问后，需要先转换为静态资源，在返回给浏览器        * 如：servlet/jsp,php,asp....3. 网络通信三要素    1. IP：电子设备(计算机)在网络中的唯一标识。    2. 端口：应用程序在计算机中的唯一标识。 0~65536    3. 传输协议：规定了数据传输的规则        1. 基础协议：            1. tcp:安全协议，三次握手。 速度稍慢            2. udp：不安全协议。 速度快</code></pre><h2 id="web服务器软件："><a href="#web服务器软件：" class="headerlink" title="web服务器软件："></a>web服务器软件：</h2><pre><code>* 服务器：安装了服务器软件的计算机* 服务器软件：接收用户的请求，处理请求，做出响应* web服务器软件：接收用户的请求，处理请求，做出响应。    * 在web服务器软件中，可以部署web项目，让用户通过浏览器来访问这些项目    * web容器* 常见的java相关的web服务器软件：    * webLogic：oracle公司，大型的JavaEE服务器，支持所有的JavaEE规范，收费的。    * webSphere：IBM公司，大型的JavaEE服务器，支持所有的JavaEE规范，收费的。    * JBOSS：JBOSS公司的，大型的JavaEE服务器，支持所有的JavaEE规范，收费的。    * Tomcat：Apache基金组织，中小型的JavaEE服务器，仅仅支持少量的JavaEE规范servlet/jsp。开源的，免费的。* JavaEE：Java语言在企业级开发中使用的技术规范的总和，一共规定了13项大的规范* Tomcat：web服务器软件    1. 下载：http://tomcat.apache.org/    2. 安装：解压压缩包即可。        * 注意：安装目录建议不要有中文和空格    3. 卸载：删除目录就行了    4. 启动：        * bin/startup.bat ,双击运行该文件即可        * 访问：浏览器输入：http://localhost:8080 回车访问自己                          http://别人的ip:8080 访问别人        * 可能遇到的问题：            1. 黑窗口一闪而过：                * 原因： 没有正确配置JAVA_HOME环境变量                * 解决方案：正确配置JAVA_HOME环境变量            2. 启动报错：                1. 暴力：找到占用的端口号，并且找到对应的进程，杀死该进程                    * netstat -ano                2. 温柔：修改自身的端口号                    * conf/server.xml                    * &lt;Connector port=&quot;8888&quot; protocol=&quot;HTTP/1.1&quot;                       connectionTimeout=&quot;20000&quot;                       redirectPort=&quot;8445&quot; /&gt;                    * 一般会将tomcat的默认端口号修改为80。80端口号是http协议的默认端口号。                        * 好处：在访问时，就不用输入端口号    5. 关闭：        1. 正常关闭：            * bin/shutdown.bat            * ctrl+c        2. 强制关闭：            * 点击启动窗口的×    6. 配置:        * 部署项目的方式：            1. 直接将项目放到webapps目录下即可。                * /hello：项目的访问路径--&gt;虚拟目录                * 简化部署：将项目打成一个war包，再将war包放置到webapps目录下。                    * war包会自动解压缩            2. 配置conf/server.xml文件                在&lt;Host&gt;标签体中配置                &lt;Context docBase=&quot;D:\hello&quot; path=&quot;/hehe&quot; /&gt;                * docBase:项目存放的路径                * path：虚拟目录            3. 在conf\Catalina\localhost创建任意名称的xml文件。在文件中编写                &lt;Context docBase=&quot;D:\hello&quot; /&gt;                * 虚拟目录：xml文件的名称        * 静态项目和动态项目：            * 目录结构                * java动态项目的目录结构：                    -- 项目的根目录                        -- WEB-INF目录：                            -- web.xml：web项目的核心配置文件                            -- classes目录：放置字节码文件的目录                            -- lib目录：放置依赖的jar包        * 将Tomcat集成到IDEA中，并且创建JavaEE的项目，部署项目。</code></pre><h2 id="Servlet：-server-applet"><a href="#Servlet：-server-applet" class="headerlink" title="Servlet：  server applet"></a>Servlet：  server applet</h2><pre><code>* 概念：运行在服务器端的小程序    * Servlet就是一个接口，定义了Java类被浏览器访问到(tomcat识别)的规则。    * 将来我们自定义一个类，实现Servlet接口，复写方法。* 快速入门：    1. 创建JavaEE项目    2. 定义一个类，实现Servlet接口        * public class ServletDemo1 implements Servlet    3. 实现接口中的抽象方法    4. 配置Servlet         在web.xml中配置：        &lt;!--配置Servlet --&gt;        &lt;servlet&gt;            &lt;servlet-name&gt;demo1&lt;/servlet-name&gt;            &lt;servlet-class&gt;cn.itcast.web.servlet.ServletDemo1&lt;/servlet-class&gt;        &lt;/servlet&gt;        &lt;servlet-mapping&gt;            &lt;servlet-name&gt;demo1&lt;/servlet-name&gt;            &lt;url-pattern&gt;/demo1&lt;/url-pattern&gt;        &lt;/servlet-mapping&gt;</code></pre><pre><code>* 执行原理：    1. 当服务器接受到客户端浏览器的请求后，会解析请求URL路径，获取访问的Servlet的资源路径    2. 查找web.xml文件，是否有对应的&lt;url-pattern&gt;标签体内容。    3. 如果有，则在找到对应的&lt;servlet-class&gt;全类名    4. tomcat会将字节码文件加载进内存，并且创建其对象    5. 调用其方法* Servlet中的生命周期方法：    1. 被创建：执行init方法，只执行一次        * Servlet什么时候被创建？            * 默认情况下，第一次被访问时，Servlet被创建            * 可以配置执行Servlet的创建时机。                * 在&lt;servlet&gt;标签下配置                    1. 第一次被访问时，创建                        * &lt;load-on-startup&gt;的值为负数                    2. 在服务器启动时，创建                        * &lt;load-on-startup&gt;的值为0或正整数        * Servlet的init方法，只执行一次，说明一个Servlet在内存中只存在一个对象，Servlet是单例的            * 多个用户同时访问时，可能存在线程安全问题。            * 解决：尽量不要在Servlet中定义成员变量。即使定义了成员变量，也不要对修改值    2. 提供服务：执行service方法，执行多次        * 每次访问Servlet时，Service方法都会被调用一次。    3. 被销毁：执行destroy方法，只执行一次        * Servlet被销毁时执行。服务器关闭时，Servlet被销毁        * 只有服务器正常关闭时，才会执行destroy方法。        * destroy方法在Servlet被销毁之前执行，一般用于释放资源* Servlet3.0：    * 好处：        * 支持注解配置。可以不需要web.xml了。    * 步骤：        1. 创建JavaEE项目，选择Servlet的版本3.0以上，可以不创建web.xml        2. 定义一个类，实现Servlet接口        3. 复写方法        4. 在类上使用@WebServlet注解，进行配置            * @WebServlet(&quot;资源路径&quot;)            @Target({ElementType.TYPE})            @Retention(RetentionPolicy.RUNTIME)            @Documented            public @interface WebServlet {                String name() default &quot;&quot;;//相当于&lt;Servlet-name&gt;                String[] value() default {};//代表urlPatterns()属性配置                String[] urlPatterns() default {};//相当于&lt;url-pattern&gt;                int loadOnStartup() default -1;//相当于&lt;load-on-startup&gt;                WebInitParam[] initParams() default {};                boolean asyncSupported() default false;                String smallIcon() default &quot;&quot;;                String largeIcon() default &quot;&quot;;                String description() default &quot;&quot;;                String displayName() default &quot;&quot;;            }</code></pre><h2 id="IDEA与tomcat的相关配置"><a href="#IDEA与tomcat的相关配置" class="headerlink" title="IDEA与tomcat的相关配置"></a>IDEA与tomcat的相关配置</h2><pre><code>1. IDEA会为每一个tomcat部署的项目单独建立一份配置文件    * 查看控制台的log：Using CATALINA_BASE:   &quot;C:\Users\fqy\.IntelliJIdea2018.1\system\tomcat\_itcast&quot;2. 工作空间项目    和     tomcat部署的web项目    * tomcat真正访问的是“tomcat部署的web项目”，&quot;tomcat部署的web项目&quot;对应着&quot;工作空间项目&quot; 的web目录下的所有资源    * WEB-INF目录下的资源不能被浏览器直接访问。3. 断点调试：使用&quot;小虫子&quot;启动 dubug 启动</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;今日内容&quot;&gt;&lt;a href=&quot;#今日内容&quot; class=&quot;headerlink&quot; title=&quot;今日内容&quot;&gt;&lt;/a&gt;今日内容&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;1. web相关概念回顾
2. web服务器软件：Tomcat
3. Servlet入门学习
&lt;/code&gt;
      
    
    </summary>
    
      <category term="java" scheme="www.friend-ma.top/categories/java/"/>
    
      <category term="JavaWeb" scheme="www.friend-ma.top/categories/java/JavaWeb/"/>
    
    
      <category term="Tomcat" scheme="www.friend-ma.top/tags/Tomcat/"/>
    
      <category term="servlet" scheme="www.friend-ma.top/tags/servlet/"/>
    
  </entry>
  
  <entry>
    <title>hexo分类无法显示</title>
    <link href="www.friend-ma.top/2019/04/12/hexo%E5%88%86%E7%B1%BB%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/"/>
    <id>www.friend-ma.top/2019/04/12/hexo分类无法显示问题/</id>
    <published>2019-04-12T10:57:50.000Z</published>
    <updated>2019-05-14T17:12:31.310Z</updated>
    
    <content type="html"><![CDATA[<p>步骤一：</p><p>由于默认是没有<code>tags</code>和<code>categories</code>的，命令行:</p><ul><li>hexo new page “tags”</li><li>hexo new page “categories”</li></ul><p>第二步：</p><p>编辑<code>\source\tags\index.md</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 文章分类</span><br><span class="line">date: 2019-04-11 00:35:13</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">layout: &quot;tags&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>编辑<code>\source\categories</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2019-04-11 01:01:07</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;步骤一：&lt;/p&gt;
&lt;p&gt;由于默认是没有&lt;code&gt;tags&lt;/code&gt;和&lt;code&gt;categories&lt;/code&gt;的，命令行:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;hexo new page “tags”&lt;/li&gt;
&lt;li&gt;hexo new page “categories”&lt;
      
    
    </summary>
    
      <category term="hexo" scheme="www.friend-ma.top/categories/hexo/"/>
    
    
      <category term="hexo" scheme="www.friend-ma.top/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexo 图片无法显示</title>
    <link href="www.friend-ma.top/2019/04/12/hexo-%E5%9B%BE%E7%89%87%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA/"/>
    <id>www.friend-ma.top/2019/04/12/hexo-图片无法显示/</id>
    <published>2019-04-12T10:57:50.000Z</published>
    <updated>2019-04-12T14:24:24.845Z</updated>
    
    <content type="html"><![CDATA[<p>遇到这样的问题</p><img src="/2019/04/12/hexo-图片无法显示/figure1.png" title="This is an example image"><p></p><h2>解决方法</h2><br>1.首先确认站点_config.yml（hexo根目录下的那个） 中有 post_asset_folder: true。(空一格)<br>Hexo 提供了一种更方便管理 Asset 的设定：post_asset_folder<br>当您设置post_asset_folder为true参数后，在建立文件时，Hexo<br>会自动建立一个与文章同名的文件夹，您可以把与该文章相关的所有资源都放到那个文件夹，如此一来，您便可以更方便的使用资源。<p></p><p>2.在hexo的目录下执行<code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code>（需要等待一段时间）。</p><p>3.hexo n “demo”</p><p>4.完成安装后用hexo新建文章的时候会发现_posts目录下面会多出一个和文章名字一样的文件夹。图片就可以放在文件夹下面。结构如下：<br>demo文件夹<br>–figure2.png<br>demo.md</p><p>图片要和文章所在的文件夹在一起，写成这样就可以了，在demo.md 插入你要插入的图片的位置写如下：</p><pre><code> {% asset_img figure2.png This is an example image %}  /*修改figure2.png，figure2.png应在[demo文件夹中]*/</code></pre><img src="/2019/04/12/hexo-图片无法显示/figure2.png" title="This is an example image">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;遇到这样的问题&lt;/p&gt;
&lt;img src=&quot;/2019/04/12/hexo-图片无法显示/figure1.png&quot; title=&quot;This is an example image&quot;&gt;
&lt;p&gt;&lt;/p&gt;&lt;h2&gt;解决方法&lt;/h2&gt;&lt;br&gt;1.首先确认站点_config.yml（
      
    
    </summary>
    
      <category term="hexo" scheme="www.friend-ma.top/categories/hexo/"/>
    
    
      <category term="hexo" scheme="www.friend-ma.top/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>蒹葭</title>
    <link href="www.friend-ma.top/2019/04/10/hello-world/"/>
    <id>www.friend-ma.top/2019/04/10/hello-world/</id>
    <published>2019-04-10T12:29:15.656Z</published>
    <updated>2019-04-10T17:12:21.171Z</updated>
    
    <content type="html"><![CDATA[<p>蒹葭苍苍，白露为霜。所谓伊人，在水一方。溯洄从之，道阻且长。溯游从之，宛在水中央。</p><p>蒹葭萋萋，白露未晞。所谓伊人，在水之湄。溯洄从之，道阻且跻。溯游从之，宛在水中坻。</p><p>蒹葭采采，白露未已。所谓伊人，在水之涘。溯洄从之，道阻且右。溯游从之，宛在水中沚。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;蒹葭苍苍，白露为霜。所谓伊人，在水一方。溯洄从之，道阻且长。溯游从之，宛在水中央。&lt;/p&gt;
&lt;p&gt;蒹葭萋萋，白露未晞。所谓伊人，在水之湄。溯洄从之，道阻且跻。溯游从之，宛在水中坻。&lt;/p&gt;
&lt;p&gt;蒹葭采采，白露未已。所谓伊人，在水之涘。溯洄从之，道阻且右。溯游从之，宛在水中
      
    
    </summary>
    
      <category term="文学" scheme="www.friend-ma.top/categories/%E6%96%87%E5%AD%A6/"/>
    
    
      <category term="诗经" scheme="www.friend-ma.top/tags/%E8%AF%97%E7%BB%8F/"/>
    
      <category term="古典文学" scheme="www.friend-ma.top/tags/%E5%8F%A4%E5%85%B8%E6%96%87%E5%AD%A6/"/>
    
  </entry>
  
</feed>
